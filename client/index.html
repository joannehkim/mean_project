<!DOCTYPE html>
<html ng-app='myApp'>

<head>
	<title>MEAN PROJECT</title>
	<script type="text/javascript" script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular.min.js"></script>
	<script type="text/javascript" script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-route.min.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">


  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
	
  

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>

  <link rel="stylesheet" href="https:/.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="/maxcdnsha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

  <!-- Optional theme -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">
  <!-- Latest compiled and minified JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

  <link rel='stylesheet' href='./static/style.css'>

<script>
    var myApp = angular.module('myApp', ['ngRoute'])
      .config(function($routeProvider){
        $routeProvider
          .when('/', {
            templateUrl: "/partials/index.html",
            // controller: "loginController"
          })
          .when('/login', {
            templateUrl: "/partials/login.html"
            // controller: "successController"
          })
          .when('/register', {
            templateUrl: "/partials/register.html"
            // controller: "successController"
          })
          .when('/success', {
          	templateUrl: "/partials/main.html",
            controller: "MainController"
          })
          .when('/new_event', {
            templateUrl: "/partials/new_event.html",
            controller:"MainController"
          })
          .when('/event_details', {
            templateUrl: "/partials/event_details.html"
          })
          .when('/stats', {
            templateUrl: "/partials/stats.html"
          })
          .when('/study_event', {
            templateUrl: "/partials/study_event.html"
          })
          .when('/travel_event', {
            templateUrl: "/partials/travel_event.html"
          })
          .when('/errands_event', {
            templateUrl: "/partials/errands_event.html"
          })
          .when('/shopping_event', {
            templateUrl: "/partials/shopping_event.html"
          })
          .when('/special_event', {
            templateUrl: "/partials/special_event.html"
          })
          .when('/work_event', {
            templateUrl: "/partials/work_event.html"
          })
      })
      // .controller('loginController', loginController)
      // .controller('MainController', MainController)
      // .factory('loginFactory', loginFactory)
      // .factory('topicFactory', topicFactory)
      myApp.factory('TaskFactory', function($http, $location){
        var factory = {};
        var tasks = [
        { _user: 'Kevin',
          topic: 'Get food',
          desc: 'I like turtles',
          category: 'Errands',
          date: '2016-04-12',
          completed:0},
        { _user: 'Joanne',
          topic: 'Put funny bows on my dog.',
          desc: 'What a man',
          category: 'Special',
          date: '2016-04-12',
          completed: 1},
        { _user: 'Jasper',
          topic: 'Turn up at Coachella',
          desc: "Let's go baby!!",
          category: 'Travel',
          date: '2016-04-12',
          completed:0}];
        factory.index = function(callback){
          $http.get('/tasks').success(function(output){
            tasks = output;
            callback(tasks);
          })
        }
        factory.create = function(info, callback){
          $http.post('/addTask', info).success(function(output){
            tasks.push({name:info.name, desc: info.desc, date: info.date, category: info.category, completed: 0});

          })
        }
        return factory;
      });
      myApp.controller('MainController', function(TaskFactory, $scope, $location){
        $scope.new_task = {};
        $scope.tasks = [];
        TaskFactory.index(function(data){
          $scope.tasks = data;
        });
        $scope.addTask = function(){
          console.log('clicked add task');
          console.log($scope.new_task);
          TaskFactory.create($scope.new_task, function(data){
            $scope.new_task = {};
            $scope.tasks = TaskFactory.index();
            $location.path('/success')
          })
        }
      });
</script>
<script type="text/javascript">
  $(document).ready(function() {
    $(document).on("click", "#special", function() {
      $('#category').val("Special");
    })
    $(document).on("click", "#shopping", function() {
      $('#category').val("Shopping");
    })
    $(document).on("click", "#work", function() {
      $('#category').val("Work");
    })
    $(document).on("click", "#travel", function() {
      $('#category').val("Travel");
    })
    $(document).on("click", "#study", function() {
      $('#category').val("Study");
    })
    $(document).on("click", "#errands", function() {
      $('#category').val("Errands");
    })
  })  

</script>
</head>




<body ng-app='myApp'>
	<a class = 'links' href='#/'>Dashboard</a> | <a class= 'links' href='#/new_event'>Add a new Event</a> 
  <div id="banner">
    <img src="/static/banner.jpg">
      <div id = 'partial' ng-view="" >
      </div>
  </div>
  	
  </div>
<!-- 	<a href='#/'>Dashboard</a> | <a href='#/partial2'>Products</a> | <a href='#/partial3'>Orders</a> | <a href='#/partial4'>Customers</a> | <a href='#/partial5'>Settings</a> -->


</body>

</html>

